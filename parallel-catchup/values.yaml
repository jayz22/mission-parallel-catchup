worker:
  replicas: 128 # number of workers running in the StatefulSet

monitor:
  logging_interval_seconds: 30

job:
  args: |
    until redis-cli -h redis -p 6379 ping; do echo waiting for redis; sleep 2; done;
    latestLedgerNum=52286600;
    ledgersPerJob=16000;
    overlapLedgers=320;
    startingLedger=0;
    endRange=$latestLedgerNum;
    while [ "$endRange" -gt "$startingLedger" ]; do
        ledgersToApply=$((ledgersPerJob + overlapLedgers));
        echo "${endRange}/${ledgersToApply}";
        redis-cli -h redis -p 6379 RPUSH ranges "${endRange}/${ledgersToApply}";
        endRange=$(( endRange - ledgersPerJob ));
    done
